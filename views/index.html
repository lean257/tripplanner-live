{% extends 'layout.html' %}

{% block title %}Your Trip{% endblock %}

{% block content %}
<div id="app" class="row">
  <div class="map-container col-sm-8 col-lg-9">
    <div>
      <div id="map-canvas"></div>
    </div>
  </div>
  <div id="control-panel" class="col-sm-4 col-lg-3 ">
  	<div class="row">
	    <div class="col-xs-6 col-sm-12">
	      <div class="panel panel-default">
	        <div class="panel-body" id="options-panel">
	          <div>
	            <h4>Hotels</h4>
	            <select data-type="hotel" id="hotel-choices">
	            </select>
	            <button data-action="add" class="btn btn-primary btn-circle pull-right" id="add-hotel">+</button>
	          </div>
	          <div>
	            <h4>Restaurants</h4>
	            <select data-type="restaurant" id="restaurant-choices">
	            </select>
	            <button data-action="add" class="btn btn-primary btn-circle pull-right" id="add-restaurant">+</button>
	          </div>
	          <div>
	            <h4>Activities</h4>
	            <select data-type="activity" id="activity-choices">
	            </select>
	            <button data-action="add" class="btn btn-primary btn-circle pull-right" id="add-activity">+</button>
	          </div>
	        </div>
	      </div>
	    </div>
	    <div class="col-xs-6 col-sm-12">
	      <h3>
	        <span id="day-title">
	          <span>Day</span>
	          <button class="btn btn-xs btn-danger remove btn-circle">x</button>
	        </span>
	      </h3>
	      <div class="panel panel-default">
	        <div class="panel-heading">
	          <div class="day-buttons">
	            <button class="btn btn-circle day-btn">1</button>
	            <button class="btn btn-circle day-btn current-day">2</button>
	            <button class="btn btn-circle day-btn">3</button>
	            <button class="btn btn-circle day-btn" id="day-add">+</button>
	          </div>
	        </div>
	        <div class="panel-body" id="itinerary">
	          <div>
	            <h4>My Hotel</h4>
	            <ul class="list-group">
								<div class="itinerary-item" id="hotel-list">
	              </div>
	            </ul>
	          </div>
	          <div>
	            <h4>My Restaurants</h4>
	            <ul class="list-group">
	              <div class="itinerary-item" id="restaurant-list">
	              </div>
	            </ul>
	          </div>
	          <div>
	            <h4>My Activities</h4>
	            <ul class="list-group">
	              <div class="itinerary-item" id="activity-list">
	              </div>
	            </ul>
	          </div>
	        </div>
	      </div>
	    </div>
    </div>
  </div>
</div>
<script>
  var hotels = {{ hotels | dump | safe }};
  var restaurants = {{ restaurants | dump | safe }};
	var activities = {{ activities | dump | safe }};
	// add hotels to drop down
	hotels.forEach(function(hotel) {
		$('#hotel-choices').append('<option>'+hotel.name+'</option>')
	})

	// add restaurants to drop down
	restaurants.forEach(function(restaurant) {
		$('#restaurant-choices').append('<option>'+restaurant.name+'</option>')
	})

	// add activities to drop down
	activities.forEach(function(activity) {
		$('#activity-choices').append('<option>'+activity.name+'</option>')
	})

	// add items to itinerary
	$('#add-hotel').click(function() {
		var $hotel = $('#hotel-choices').find(':selected').text();
		$('#hotel-list').append('<span class="title">'+$hotel+'</span><button class="btn btn-xs btn-danger remove btn-circle">x</button>');
	})

	$('#add-restaurant').click(function() {
		var $restaurant = $('#restaurant-choices').find(':selected').text();
		$('#restaurant-list').append('<span class="title">'+$restaurant+'</span><button class="btn btn-xs btn-danger remove btn-circle">x</button>');
	})

	$('#add-activity').click(function() {
		var $activity = $('#activity-choices').find(':selected').text();
		$('#activity-list').append('<span class="title">'+$activity+'</span><button class="btn btn-xs btn-danger remove btn-circle">x</button>');
	})

</script>

{% endblock %}
